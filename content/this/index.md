---
emoji: 🔮
title: this
date: '2022-09-12 00:00:00'
author: 김지수
tags: 자바스크립트 core-javascript this
categories: 자바스크립트
---

# this

자신이 속한 객체 또는 자신이 생성할 인스턴스를 가리키는 자기 참조 변수 입니다.

다른 대부분의 언어에서 this는 클래스로 생성한 인스턴스 객체를 의미합니다. 클래스에서만 사용할 수 있기 떄문에 혼란의 여지가 없거나 많지 않습니다. 그러나 자바스크립트에서의 this는 어디서든 사용할 수 있습니다. 상황에 따라 this가 바라보는 대상이 달라지는데, 어떤 이유로 그렇게 되는지를 파악하기 힘든 경우도 있고 예상과 다르게 엉뚱한 대상을 바라보는 경우도 있습니다. 이런 경우에 문제를 해결하려면 원인을 추적해서 수정해야 하는데, 정확한 작동 방식을 이해하지 못하면 원인을 파악해서 해결할 수 없습니다. 

함수와 객체(메서드)의 구분이 느슨한 자바스크립트에서 this는 실질적으로 이 둘을 구분하는 거의 유일한 기능입니다. 상황별로 this가 어떻게 달라지는제, 왜 그렇게 되는지, 예상과 다른 대상을 바라보고 있을 경우 그 원인을 효과적으로 추적하는 방법 등을 살펴보겠습니다.

## 상황에 따라 달라지는 this
this는 기본적으로 실행 컨텍스트가 생성될 때 함께 결정됩니다. 실행 컨텍스트는 함수를 호출할 때 생성되므로, 바꿔 말하면 this는 함수를 호출할 때 결정된다고 할 수 있겠습니다.함수를 어떤 방식으로 호출하느냐에 따라 값이 달라지는 것입니다.

### 전역 공간에서의 this
전역 객체를 가리킵니다. 브라우저는 윈도우, 노드는 글로벌

### 메서드로 호출할 때 메서드 내부에서의 this
함수 vs 메서드
독립성에 있습니다. 함수는 그 자체로 독립적인 기능을 수행하는 반면, 메서드는 자신을 호출한 대상 객체에 관한 동작을 수행합니다.
메서드는 객체의 메서드로서 호출할 경우에만 메서드로 동작하고, 그렇지 않으면 함수로 동작합니다.

함수 앞에 점이 있는지 간단하게 구분할 수 있습니다.

메서드 내부에서의 this는 호출한 객체를 바라봅니다.

### 함수로 호출할 때 this
함수로서 호출할 경우 this가 지정되지 않습니다. 호출한 주체에 대한 정보가 담긴다고 했습니다. 그런데 함수로 호출은 주체의 정보를 알 수 없는 것입니다. 실행 컨텍스트를 활성화할 당시에 this가 지정되지 않은 경우 this는 전역 객체를 바라본다고 했습니다. 따라서 함수에서의 this는 전역 객체를 가리킵니다.

* 내부함수에서 this를 우회하는 방법
```
var self = this; 
```
변수를 활용하여 바인딩

ES6에서는 함수 내부에서 this가 전역객체를 바라보는 문제를 보완하고자, this를 바인딩 하지 않는 화살표 함수를 새로 도입했습니다. 화살표 함수는 실행 컨텍스트를 생성할 때 this 바인딩 과정 자체가 빠지게 되어, 상위 스코프의 this를 그대로 활용할 수 있습니다.

### 콜백 함수 호출 시 그 함수 내부에서의 this
콜백 함수는 실행 제어권을 다른 함수에게 넘겨주는 경우를 말합니다.
콜백 함수도 기본적으로 함수이기 때문에 기본적으로 전역 객체를 참조하지만, 제어권을 받은 함수에서 콜백 함수에 별도로 this가 될 대상을 지정한 경우에는 그 대상을 참조하게 됩니다.

### 생성자 함수 내부에서의 this
앞으로 생성될 인스턴스

## 명시적으로 this를 바인딩 하는 방법
앞서 this는 자기 참조 변수라고 정의 했습니다. 코딩을 하다 보면 자기 자신을 스스로 불러야 할 때 this 키워드를 사용하게 되는데 어떤 경우에는 나 아닌 다른 곳을 바라보게 하고 싶은 경우도 발생합니다. 이럴때 사용하는 것이 call, apply, bind 입니다.
### call 메서드
메서드의 호출 주체인 함수를 즉시 실행하도록 하는 명령입니다. 이때 call 메서드의 첫 번째 인자를 this로 바인딩하고, 이후의 인자들을 호출할 함수의 매개변수로 합니다.

### apply
call과 동일하지만 나머지 모든 인자들을 배열로 받아 매개변수로 지정합니다.

### call, apply 활용 

1. 유사배열객체에서 배열 메서드를 적용
객체에는 배열 메서드를 직접 적용할 수 없습니다. 그러나 키가 0 또는 양의 정수인 프로퍼티가 존재하고 length 프로퍼티 값이 0 또는 양의 정수인 객체, 즉 배열과 유사한 경우 call 또는 apply 메서드를 이용해 배열 메서드를 차용할 수 있습니다. 또는 ES6 환경에서는 Array.from()을 사용함.


### bind
call과 비슷하지만 즉시 호출하지 않고 넘겨받은 this 및 인수들을 바탕으로 새로운 함수를 반환하기만 하는 메서드입니다. 

### 일급 객체란?
1. 값으로 표현될 수 있다.
2. 변수나 자료구조에 저장할 수 있다.
3. 함수의 매개변수에 전달할 수 있다. 
4. 함수의 반환값으로 사용할 수 있다.

자바스크립트의 함수는 위 모든 조건을 만족시키기 때문에 일급 객체입니다. 
일급 객체로서의 함수는 일반 객체러처 함수의 매개변수에 전달하고 반환할 수 있기 때문에 함수형 프로그래밍 가능하다.

함수를 객체와 동일하게 사용할 수 있다는 의미, 장점은 무엇일까요?
일반 객체는 호출할 수 없지만, 함수는 호출 가능하다.

함수를 데이터 다루 듯이 할 수 있다.
고차함수를 만들 수 있고 콜백을 사용할 수 있다.